<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2>{{ formTitle() }}</h2>

    @if(form.get('username')?.errors?.['pattern']){
    <div>
        <small>{{ errorMessage.INVALID_USERNAME }}</small>
    </div>
    }
    @if(form.get('phoneNumber')?.errors?.['pattern']){
    <div>
        <small>{{ errorMessage.INVALID_PHONE_NUMBER }}</small>
    </div>
    }
    @if(form.get('password')?.errors?.['minlength'] && form.get('password')?.touched){
    <div>
        <small>{{ errorMessage.PASSWORD_MINLENGTH }}</small>
    </div>
    }
    @if(form.errors?.['passwordMismatch'] && !form.get('password')?.errors?.['minlength']){
    <div>
        <small>{{ errorMessage.PASSWORD_MISMATCH }}</small>
    </div>
    }
    @if(errorSignal()){
    <div>
        <small>{{ errorSignal() }}</small>
    </div>
    }
    @for(field of fields(); track field.name) {
    <div>
        <label>{{ field.label }}</label>
        <input [type]="field.type" [formControlName]="field.name" #formInput>
    </div>
    }
    @if(buttonLabel()){
    <button type="submit" [disabled]="form.invalid" [ngClass]="{'invalid-btn' : form.invalid}">
        {{ buttonLabel() }}
    </button>
    }
    @if(formMessage() && formLink() && formLinkText()){
    <div>
        <p>{{ formMessage() }}</p>
        <a [routerLink]="formLink()">{{ formLinkText() }}</a>
    </div>
    }
</form>
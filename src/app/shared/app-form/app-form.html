<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2>{{ formTitle() }}</h2>

    @for(field of formFields(); track field.name) {
    <div class="form-input">
        @let firstError = getError(field.name);
        @if(firstError){
        <small>(*) {{ firstError }}</small>
        }@else if(field.name === 'confirmPassword' && form.errors?.['passwordMismatch']){
        <small>(*) {{ errorMessage.PASSWORD_MISMATCH }}</small>
        }
        <div>
            <input [type]="field.type" [id]="field.name" [formControlName]="field.name" [placeholder]="field.label"
                #formInput>
            <label [for]="field.name" (click)="showPassword(field)">
                <i [class]="field.icon"></i>
            </label>
        </div>
    </div>
    }

    @if(buttonLabel(); as buttonLabel){
    <button type="submit" [ngClass]="{'no-active' : form.invalid}">
        {{ buttonLabel }}
    </button>
    }

    @if(formLinkMessage(); as formLinkText){
    <div>
        <p><i>{{ formLinkText }}</i></p>
        <a [routerLink]="[formUrl()]">
            {{ formLinkTitle() }}
        </a>
    </div>
    }
</form>

<div class="table-responsive">
  <table>
    <thead>
      <tr>
        <th></th>
        @for(col of columns(); track col){
        <th scope="col">
          @if(col.field !== 'id'){
            {{col.headerText}}
          }
        </th>
        }
      </tr>
    </thead>
    <tbody>
      @if(tableData().length > 0){
      @for(data of tableData(); track data){
      <tr>
        <td>
          <div>
            @let user = currentUser();
            @if(user && user.role === 'Admin'){
            <div class="action-cell">
              <button class="action-btn" type="button" [title]="tooltipToogleBtn" appActionMenuDirective
                [content]="dialogTemplate" (click)="setData(data)">
                <i class="fa-solid fa-ellipsis-vertical"></i>
              </button>
            </div>
            }
          </div>
        </td>
        @for(col of columns(); track col){
        @let value = getFieldAsString(data, col.field!, col.pipe);
        @let id = getId(data!);

        <td [title]="value">
          <div>
            @if(col.field !== 'id'){
              <span [appStatusIcon]="value"></span>
              @if(col.field === 'name'){
              <a [routerLink]="['/products/detail', id]" [title]="value">
                <span>
                  {{ value }}
                </span>
              </a>
              } @else {
              <span class="text-truncate">{{ value }}</span>
              }
            }
          </div>
        </td>
        }
      </tr>
      }
      }
    </tbody>
  </table>
</div>

<ng-template #dialogTemplate>
  <div class="action-dropdown">
    <button [title]="tooltipEditBtn" (click)="handleActions('edit')">
      Edit
      <i class="fa-solid fa-pencil"></i>
    </button>
    <button [title]="tooltipDeleteBtn" (click)="handleActions('delete')">
      Delete
      <i class="fa-solid fa-trash"></i>
    </button>
  </div>
</ng-template>
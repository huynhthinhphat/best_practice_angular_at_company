<div class="cart-container">
  <h1 class="cart-title">üõí Your Shopping Cart</h1>

  @if(totalPrice() > 0){
    <div class="cart-summary">
      <p><strong>Total:</strong> {{ totalPrice() | currency:'VND':'symbol' }}</p>
    </div>
  }
  @if(cartItems().length > 0){
    <cdk-virtual-scroll-viewport itemSize="100" class="cart-container-viewport">
      <div class="cart-item" *cdkVirtualFor="let item of cartItems(); trackBy: trackById">
        <div (click)="onClickProduct(item.product?.id ?? '')">
          <div class="cart-item-image">
            <img [src]="item.product?.imageUrl" [alt]="item.product?.name">
          </div>
          <div class="cart-item-info">
            <h2 class="cart-item-name"><strong>Name: </strong>{{ item.product?.name }}</h2>
            <p class="cart-item-price"><strong>Price: </strong>{{ item.product?.price | currency:'VND':'symbol' }}</p>
            <p class="cart-item-price"><strong>Total price: </strong>{{ (item.product?.price || 0) * (item.quantity || 0) | currency:'VND':'symbol' }}</p>
            <p class="cart-item-stock"><strong>Stock: </strong>{{ item.product?.stock }}</p>
          </div>
        </div>
        <div class="cart-item-actions">
          <button class="btn-quantity" (click)="handleCartItemToCart(item.product!, (item.quantity ?? 1) - 1)">-</button>
          <input type="number" [(ngModel)]="item.quantity" [min]="1" [max]="item.product?.stock ?? 1" (blur)="handleCartItemToCart(item.product!, item.quantity!)"/>
          <button class="btn-quantity" (click)="handleCartItemToCart(item.product!, (item.quantity ?? 1) + 1)">+</button>
        </div>
        <div class="cart-item-remove">
          <button class="btn-remove" (click)="handleDeleteCartItem(item.id)">‚ùå</button>
        </div>
      </div>
    </cdk-virtual-scroll-viewport>
  } @else {
    <p class="empty-message">Your cart is empty üõçÔ∏è</p>
  }
</div>

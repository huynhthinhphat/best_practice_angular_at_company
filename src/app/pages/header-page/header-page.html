@let isVisibleInput = isShowInputSearch();
@let loginIn = isLoginIn();
@let darkMode = isDarkMode();
@let showMenu = isShowMenu();

<header>
  <div class="header-container">
    <div>
      <div class="logo" [routerLink]="['/']"></div>

      <div class="search-box">
        <button class="btn-search" [ngClass]="{'is-active' : isVisibleInput}" (click)="toggleInputSearch()">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <input type="text" id="search" class="search-input" placeholder="Search by product name..." list="products"
          (input)="searchProduct($event.target.value)" [ngClass]="{'is-active' : isVisibleInput}">
        <!-- <datalist id="products">
                  @for(product of products(); track product.id){
                  <option [value]="product.name"></option>
                  }
                </datalist> -->
      </div>
    </div>

    <nav class="nav-menu" [class.is-login]="loginIn">
      <ul>
        <li>
          <a class="switch-theme" (click)="toggleTheme()" [title]="titleMode">
            <i class="fa-solid " [ngClass]="{'fa-sun': !darkMode, 'fa-moon': darkMode}"></i>
          </a>
        </li>
        @if(!loginIn){
        <li>
          <a routerLink="/auth/login">
            <i class="fa-regular fa-user"></i>
            <span>
              Login
            </span>
          </a>
        </li>
        <li>
          <a routerLink="/auth/register">
            <i class="fa-solid fa-user"></i>
            <span>
              Register
            </span>
          </a>
        </li>
        }@else {
        <li class="user-info">
          <div class="rounded-circle" (click)="toggleMenu()" #menuWrapper>
            <span>
              {{ firstCharacter() }}
            </span>
            @if(showMenu){
            <ul class="menu">
              <li>
                <a href="">
                  Profile
                  <i class="fa-solid fa-user"></i>
                </a>
              </li>
              <li class="cart-item">
                <a [routerLink]="['/cart', currentUser()?.id]" [title]="titleCart">
                  Cart
                  <i class="fa-solid fa-cart-shopping"></i>
                  <span class="notification-indicator-number">
                    {{ quantityItems() }}
                  </span>
                </a>
              </li>
              <li>
                <a routerLink="/orders/user" [title]="titleOrder">
                  Orders
                  <i class="fa-solid fa-receipt"></i>
                </a>
              </li>
              <li>
                <a (click)="logout()">
                  Logout
                  <i class="fa-solid fa-right-from-bracket"></i>
                </a>
              </li>
            </ul>
            }
          </div>
        </li>
        }
      </ul>
    </nav>
  </div>
</header>

<!-- <ng-template>
  <nav class="nav-bars">
    <div (click)="toggleMenu()">
      â˜° Menu
      @if(isShowMenu()){
      <ul>
        @if(!isVisible && currentUser() == null){
        <li>
          <a routerLink="/login">Login</a>
        </li>
        <li>
          <a routerLink="/register">Register</a>
        </li>
        }@else {
        @if(currentUser()?.role === 'User'){
        <li>
          <a [routerLink]="['/orders/user']">ðŸ“¦ Orders</a>
        </li>
        <li>
          <a [routerLink]="['/cart', currentUser()?.id]">ðŸ›’ Cart ({{ quantityItems() }})</a>
        </li>
        }
        <li>
          <a (click)="logout()">ðŸšª Logout</a>
        </li>
        }
      </ul>
      }
    </div>
  </nav>
</ng-template> -->

<!-- <div>
  <p>Welcome, {{ currentUser()?.fullName }}</p>
  @if(currentUser()?.role === 'User'){
  <button [routerLink]="['/orders/user']" class="btn">ðŸ“¦ Orders</button>
  <button [routerLink]="['/cart', currentUser()?.id]" class="btn">ðŸ›’ Cart ({{ quantityItems() }})</button>
  }
  <button (click)="logout()" class="btn btn-logout">ðŸšª Logout</button>
</div> -->

@let user = currentUser();
@let isVisibleInput = isShowInputSearch();

<header>
  <div class="header-container">
    <div>
      <button class="btn-bars">
        <i class="fa-solid fa-bars"></i>
      </button>
      <div class="logo" [routerLink]="['/']"></div>

      <div class="search-box">
        <button class="btn-search" [ngClass]="{'is-active' : isVisibleInput}" (click)="toggleInputSearch()">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
        <input type="text" id="search" class="search-input" placeholder="Search by product name..." list="products"
          (input)="searchProduct($event.target.value)" [ngClass]="{'is-active' : isVisibleInput}">
        <!-- <datalist id="products">
                  @for(product of products(); track product.id){
                  <option [value]="product.name"></option>
                  }
                </datalist> -->
      </div>
    </div>

    <nav class="nav-menu">
      <div>
        <ul>
          <li>
            @if(!user){
            <a routerLink="/auth/login">
              <i class="fa-regular fa-user"></i>
              <span>
                Login
              </span>
            </a>
            }@else {
            <i class="fa-solid fa-circle-user user" (click)="toggleMenu()"></i>
            @if(isShowMenu()){
            <ul class="menu">
              <li (click)="redirectPage('cart')">
                <button type="button">
                  <i class="fa-solid fa-cart-shopping"></i>
                  Cart ({{ quantityItems() }})
                </button>
              </li>
              <li (click)="redirectPage('order')">
                <button type="button">
                  <i class="fa-solid fa-receipt"></i>
                  Orders
                </button>
              </li>
              <li (click)="redirectPage('logout')">
                <button type="button">
                  <i class="fa-solid fa-right-from-bracket"></i>
                  Logout
                </button>
              </li>
            </ul>
            }
            }
          </li>
          <li>
            <a routerLink="/auth/register">
              <i class="fa-solid fa-user"></i>
              <span>
                Register
              </span>
            </a>
          </li>
          <li>
            <a class="switch-theme" (click)="toggleTheme()">
              <span>
                @if(isDarkMode()){
                <i class="fa-solid fa-sun"></i>Light
                }@else {
                <i class="fa-solid fa-moon"></i>Dark
                }
              </span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>

<!-- <ng-template>
  <nav class="nav-bars">
    <div (click)="toggleMenu()">
      â˜° Menu
      @if(isShowMenu()){
      <ul>
        @if(!isVisible && currentUser() == null){
        <li>
          <a routerLink="/login">Login</a>
        </li>
        <li>
          <a routerLink="/register">Register</a>
        </li>
        }@else {
        @if(currentUser()?.role === 'User'){
        <li>
          <a [routerLink]="['/orders/user']">ðŸ“¦ Orders</a>
        </li>
        <li>
          <a [routerLink]="['/cart', currentUser()?.id]">ðŸ›’ Cart ({{ quantityItems() }})</a>
        </li>
        }
        <li>
          <a (click)="logout()">ðŸšª Logout</a>
        </li>
        }
      </ul>
      }
    </div>
  </nav>
</ng-template> -->

<!-- <div>
  <p>Welcome, {{ currentUser()?.fullName }}</p>
  @if(currentUser()?.role === 'User'){
  <button [routerLink]="['/orders/user']" class="btn">ðŸ“¦ Orders</button>
  <button [routerLink]="['/cart', currentUser()?.id]" class="btn">ðŸ›’ Cart ({{ quantityItems() }})</button>
  }
  <button (click)="logout()" class="btn btn-logout">ðŸšª Logout</button>
</div> -->